{% extends 'user_prof.html' %}


{% block content %}

<h1>Product Categories</h1>
<table class="table table-bordered table-striped">
    <thead class="thead-dark">
        <tr>
            <th>Name</th>
            <th>Image</th>
            <th>Created At</th>
        </tr>
    </thead>
    <tbody>
        {% for category in categories %}
    <tr>
        <td>{{ category.categ_name }}</td>
        <td>
            {% if category.categ_image %}
                <img style="height: 100px; width: 100px;" src="{{ category.categ_image.url }}" alt="{{ category.categ_name }}" class="img-thumbnail" width="100">
            {% else %}
                No Image
            {% endif %}
        </td>
        <td>{{ category.created_at }}</td>
        <td>
            <!-- Add an Edit button to trigger the edit form or modal -->
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editCategoryModal{{ category.categ_id }}">
                Edit
            </button>
            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteCategoryModal{{ category.categ_id }}">
                Delete
            </button>
        </td>
    </tr>

    <!-- Modal for editing category -->
    <div class="modal fade" id="editCategoryModal{{ category.categ_id }}" tabindex="-1" role="dialog" aria-labelledby="editCategoryModalLabel{{ category.categ_id }}" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editCategoryModalLabel{{ category.categ_id }}">Edit Category</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Add your form fields for editing category name and image here -->
                    <!-- You can use Django forms or simple input fields -->
                    <form method="post" enctype="multipart/form-data" action="{% url 'edit_category' category.categ_id %}">
                        {% csrf_token %}
                        <!-- Add your form fields here -->
                        <input type="text" name="edited_categ_name" value="{{ category.categ_name }}">
                        <input type="file" name="edited_categ_image">
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="deleteCategoryModal{{ category.categ_id }}" tabindex="-1" role="dialog" aria-labelledby="deleteCategoryModalLabel{{ category.categ_id }}" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteCategoryModalLabel{{ category.categ_id }}">Delete Category</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete the category "{{ category.categ_name }}"?</p>
                    <!-- Add your form for handling the delete action -->
                    <form method="post" action="{% url 'delete_category' category.categ_id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger">Delete</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endfor %}
    </tbody>
</table>


    {% endblock%}
