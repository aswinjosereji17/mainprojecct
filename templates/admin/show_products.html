
{% extends 'user_prof.html' %}


{% block content %}
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

</head>


<h1>Products List</h1></br></br>




<div style="display: flex; flex-direction: row; gap:20px">
    <!-- <form id="product-search-form"> -->
        <!-- <label for="product-name" class="search-label">Search by Product Name:</label> -->
  <div class="input-group">
      
      <input style="width:400px; border-radius:5px; height: 40px;  border: 1px solid gray; margin-right:2px" type="text" id="product-name" name="product-name" class="" placeholder="Search by Product Name">
      <div class="input-group-prepend">
          <button style="height: 40px; " class="btn btn-outline-secondary" type="button">
              <i class="ri-search-2-line"></i>
          </button>
      </div>
  </div>
  
   <!-- </form></br></br> -->
   <!-- <form id="seller-search-form"> -->
      <!-- <label for="seller-name" class="search-label">Search by Product Name:</label> -->
  <div class="input-group">
    
    <input style="width:400px; height: 40px; border-radius:5px; border: 1px solid gray; margin-right:2px" type="text" id="seller-name" name="product-name" class="" placeholder="Search by Seller Name">
    <div class="input-group-prepend">
        <button style="height: 40px; " class="btn btn-outline-secondary" type="button">
            <i class="ri-search-2-line"></i>
        </button>
    </div>
  </div>
  <div class="input-group">
    
    <form>
        <div>
          <select style="height: 40px;" id="filterSelect">
            <option value="">All Products</option>
            <option value="noStock">No Stock</option>
            <option value="lessThanFifteen">Stock less than 15</option>
          </select>
        </div>
      </form><br>
      <br>
         
  </div>
</div>

</form><br>
<table id="product-table" class="table table-bordered">
    <thead >
                <th scope="col">Product Name</th>
                <th scope="col">Product Image</th>
                <th scope="col">Seller</th>
                <th scope="col">Stock Quantity</th>
                <th scope="col">Price/piece</th>
                <th scope="col">Created At</th>
    </thead>
    <tbody>
        {% for pdt in show_pdts %}
        <tr>
            <td>{{ pdt.prod_name }}</td>
            <td><img style="height: 70px; width: 70px;" src="{{ pdt.productdescription.img1.url}}" alt=""></td>
            <td>{{ pdt.user_id }}</td>
            <td>{{ pdt.stock_quantity }}</td>
            <td>{{ pdt.price }}</td>
            <td>{{ pdt.created_at }}</td>
            
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('#product-search-form');
        const input = document.querySelector('#product-name');
        const rows = document.querySelectorAll('#product-table tbody tr');
        const noResults = document.querySelector('#no-results');

        input.addEventListener('input', function () {
            const searchTerm = input.value.toLowerCase();

            rows.forEach(function (row) {
                const productName = row.querySelector('td:nth-child(1)').textContent.toLowerCase();
                if (productName.startsWith(searchTerm)) {
                    row.style.display = 'table-row';
                } else {
                    row.style.display = 'none';
                }
            });

            const visibleRows = [...rows].filter(row => row.style.display !== 'none');
            if (visibleRows.length === 0) {
                noResults.style.display = 'block';
            } else {
                noResults.style.display = 'none';
            }
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('#seller-search-form');
        const input = document.querySelector('#seller-name');
        const rows = document.querySelectorAll('#product-table tbody tr');
        const noResults = document.querySelector('#no-results');

        input.addEventListener('input', function () {
            const searchTerm = input.value.toLowerCase();

            rows.forEach(function (row) {
                const productName = row.querySelector('td:nth-child(3)').textContent.toLowerCase();
                if (productName.startsWith(searchTerm)) {
                    row.style.display = 'table-row';
                } else {
                    row.style.display = 'none';
                }
            });

            const visibleRows = [...rows].filter(row => row.style.display !== 'none');
            if (visibleRows.length === 0) {
                noResults.style.display = 'block';
            } else {
                noResults.style.display = 'none';
            }
        });
    });


  document.getElementById('filterSelect').addEventListener('change', function() {
    var selectedValue = this.value;
    var rows = document.querySelectorAll('#product-table tbody tr');

    rows.forEach(function(row) {
      var stockQuantity = parseInt(row.querySelector('td:nth-child(4)').textContent);
      if (selectedValue === 'noStock' && stockQuantity > 0) {
        row.style.display = 'none';
      } else if (selectedValue === 'lessThanFifteen' && stockQuantity >= 15) {
        row.style.display = 'none';
      } else {
        row.style.display = '';
      }
    });
  });

  // Initialize to show all products by default
  var rows = document.querySelectorAll('#product-table tbody tr');
  rows.forEach(function(row) {
    row.style.display = '';
  });

   
</script>


<!-- Add Bootstrap JS and Popper.js scripts (required for Bootstrap features) -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<!-- Optional: Add Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.18.0/font/bootstrap-icons.css">



{% endblock%}
