
{% extends 'user_prof.html' %}


{% block content %}

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


<div class="container mt-5">

    <table class="table table-bordered">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Event Image</th>
                <th scope="col">Date</th>
                <th scope="col">Description</th>
                <th scope="col">Mode</th>
                <!-- <th scope="col">Duration</th> -->
                <th scope="col">Booking Link</th>
                <th scope="col">Created At</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for event in events %}
                <tr>
                    <th scope="row">{{ forloop.counter }}</th>
                    <td>{{ event.name }}</td>
                    <td><img src="{{ event.event_img.url }}" alt="{{ event.name }}" style="max-width: 100px;"></td>
                    <td>{{ event.date }}</td>
                    <td>{{ event.description }}</td>
                    <td>
                        {% if event.mode == 'online' %}
                            <i ></i> Online
                        {% else %}
                            <i ></i> Offline
                        {% endif %}
                    </td>
                    <!-- <td>{{ event.duration }}</td> -->
                    <td><a href="{{ event.booking_link }}" target="_blank">{{ event.booking_link }}</a></td>
                    <td>{{ event.created_at }}</td>
                    <td>
                        <!-- Edit button to open the edit modal -->
                        <div style="display: flex; flex-direction: row; gap: 10px;">
                            <button style="background-color: yellow; border: none; color: white;" type="button" class="btn btn-primary" data-toggle="modal" data-target="#editModal{{ event.event_id }}">
                                Edit
                            </button>
                            <!-- Delete button to open the delete modal -->
                            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal{{ event.event_id }}">
                                Delete
                            </button>
                        </div>
                    </td>
                </tr>

                <!-- Edit Modal -->
                <div class="modal fade" id="editModal{{ event.event_id }}" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="editModalLabel">Edit Event</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form method="post" enctype="multipart/form-data" action="{% url 'edit_event' event.event_id %}">
                                {% csrf_token %}

                                <label for="">Event Name:</label><input type="text" name="edited_event_name" value="{{ event.name }}"><br>
                                <label for="event_img">Event Image:</label><input type="file" name="edited_event_image"><br>

                                <label for="date">Date:</label><input type="date" name="date" value="{{ event.date|date:'Y-m-d' }}"><br>
                                <label for="description">Description:</label><textarea class="form-control" name="description">{{ event.description }}</textarea><br>

                                <!-- <input type="text" value="{{ event.duration }}" name="edited_event_duration"> -->
                                <!-- <input type="file" name="edited_event_image"> -->
                                <label for="mode">Mode:</label>
                                <select name="edited_event_mode">
                                    {% for mode, mode_display in event.MODE_CHOICES %}
                                        <option value="{{ mode }}" {% if event.mode == mode %}selected{% endif %}>
                                            {{ mode_display }}
                                        </option>
                                    {% endfor %}
                                </select><br>
                                <!-- <label for="duration">Duration:</label>
                                <input type="text" value="{{ event.duration }}" name="edited_event_duration"><br> -->
                                <label for="booking_link">Booking Link:</label>
                                <input type="url" value="{{ event.booking_link }}"  name="edited_booking_link" required><br>

                                <button style="background-color: yellow; color: black; border: none;" type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Delete Modal -->
                <div class="modal fade" id="deleteModal{{ event.event_id }}" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="deleteModalLabel">Delete Event</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <p>Are you sure you want to delete this event?</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-danger"><a style="color: white; text-decoration: none;" href="{% url 'delete_event' event.event_id %}">Delete</a></button>
                            </div>
                        </div>
                    </div>
                </div>

            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Add Bootstrap JS and Popper.js scripts (required for Bootstrap features) -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<!-- Optional: Add Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.18.0/font/bootstrap-icons.css">


{% endblock%}
